<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITT Heal - Admin Dashboard</title>
    <meta name="description" content="ITT Heal administrative dashboard for managing bookings, scheduling, and business analytics">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../favicon-new.svg?v=20250708">
    <link rel="alternate icon" href="../favicon.ico?v=20250708">
    <link rel="apple-touch-icon" href="../apple-touch-icon.png?v=20250708">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32.png?v=20250708">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16.png?v=20250708">
    
    <!-- Luxury Wellness Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <link href="/dist/output.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'spa-cream': '#fdfcf7',
                        'spa-sage': {
                            50: '#f9faf9',
                            100: '#f0f4f0',
                            200: '#e1e8e1',
                            300: '#d1dcd1',
                            400: '#a8baa8',
                            500: '#8ba28b',
                            600: '#6b7b6b',
                            700: '#5a6b5a',
                            800: '#4a5a4a',
                            900: '#3a4a3a'
                        },
                        'spa-lavender': {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe'
                        },
                        'spa-ocean': {
                            50: '#e0f2fe',
                            100: '#bae6fd'
                        },
                        'spa-charcoal': {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#2d3748',
                            900: '#1e293b'
                        },
                        'midnight-blue': '#191970'
                    },
                    fontFamily: {
                        'display': ['Playfair Display', 'serif'],
                        'body': ['Inter', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'counter': 'counter 1.2s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        counter: {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
            /* ITT Heal Brand Colors */
            --primary-color: #2d3748;
            --secondary-color: #6b7b6b;
            --accent-color: #8ba28b;
            --sage-light: #f0f4f0;
            --sage-dark: #6b7b6b;
            --cream: #fdfcf7;
            --lavender-light: #f5f3ff;
            --lavender-50: #faf8ff;
            --lavender-100: #f3f0ff;
            --lavender-200: #e9e3ff;
            --lavender-300: #d6c7ff;
            --lavender-400: #b898ff;
            --lavender-500: #9c6aff;
            --lavender-600: #8a4fff;
            --lavender-700: #7d3fff;
            --lavender-800: #6d32cc;
            --lavender-900: #5a2aa6;
            --lavender-dark-50: #f8f7ff;
            --lavender-dark-100: #f0eeff;
            --lavender-dark-200: #e0ddff;
            --lavender-dark-300: #c7c0ff;
            --lavender-dark-400: #a599ff;
            --lavender-dark-500: #8366ff;
            --lavender-dark-600: #6d44ff;
            --lavender-dark-700: #5c2fff;
            --lavender-dark-800: #4c1d95;
            --lavender-dark-900: #3e1975;
            --ocean-light: #e0f2fe;
            
            /* Functional Colors */
            --success-color: #8ba28b;
            --warning-color: #d69e2e;
            --error-color: #e53e3e;
            
            /* Background & Surface Colors */
            --background-color: linear-gradient(135deg, #e8f0e8 0%, #dde5dd 50%, #c8d8c8 100%);
            --background-solid: #f0f4f0;
            --card-background: rgba(253, 252, 247, 0.95);
            --glass-background: rgba(240, 244, 240, 0.85);
            --sidebar-background: linear-gradient(180deg, #2d3748 0%, #4a5568 100%);
            
            /* Text Colors */
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --text-light: #ffffff;
            --text-accent: #8ba28b;
            
            /* Border & Shadow */
            --border-color: rgba(107, 123, 107, 0.2);
            --shadow: 0 4px 20px rgba(45, 55, 72, 0.15);
            --shadow-lg: 0 20px 40px rgba(45, 55, 72, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e8f0e8 0%, #dde5dd 50%, #c8d8c8 100%);
            background-attachment: fixed;
            color: #2d3748;
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* Visually Hidden (Screen Reader Only) */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary-color);
            color: white;
            padding: 8px 12px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1000;
            transition: top 0.2s ease;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* Layout */
        body {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
            gap: 0;
            width: 100vw;
            margin: 0;
            padding: 0;
        }

        /* Sidebar */
        .sidebar {
            background: var(--sidebar-background);
            border-right: 3px solid var(--accent-color);
            padding: 20px 0;
            box-shadow: 0 8px 24px rgba(45, 55, 72, 0.15);
            position: relative;
            overflow: hidden;
            width: 280px;
            grid-column: 1;
        }

        .sidebar-header {
            padding: 0 24px 20px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .sidebar-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .nav-menu {
            padding: 24px 0;
        }

        .nav-section {
            margin-bottom: 20px;
        }

        .nav-section-title {
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #a3a3a3;
            padding: 0 24px 12px;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            position: relative;
            z-index: 1;
            font-weight: 400;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .nav-item:hover,
        .nav-item:focus {
            background: rgba(255, 255, 255, 0.15);
            color: var(--accent-color);
            border-left-color: var(--accent-color);
            transform: translateX(4px);
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .nav-item.active {
            background: rgba(255, 215, 0, 0.2);
            color: var(--accent-color);
            border-left-color: var(--accent-color);
            font-weight: 600;
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        /* Main Content */
        .main-content {
            padding: 0;
            overflow-y: auto;
            background: var(--background-solid);
            position: relative;
            width: 100%;
            grid-column: 2;
        }
        
        /* Mobile responsive padding */
        @media (min-width: 768px) {
            .main-content {
                padding: 16px 20px;
            }
        }

        .page-header {
            margin-bottom: 24px;
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 0;
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--primary-color);
            text-shadow: 0 2px 4px rgba(46, 139, 87, 0.1);
            letter-spacing: -0.8px;
            line-height: 1.2;
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 1.3rem;
            font-weight: 300;
            font-style: italic;
            font-family: 'Playfair Display', serif;
            margin-bottom: 8px;
        }

        /* View Controls */
        .view-controls {
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
            padding: 20px;
            background: var(--card-background);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }

        .view-control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .view-control-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .view-control-buttons {
            display: flex;
            gap: 8px;
        }

        .view-btn {
            padding: 12px 20px;
            min-width: 44px;
            min-height: 44px;
            border: 2px solid var(--border-color);
            background: white;
            color: var(--text-primary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .view-btn:hover,
        .view-btn:focus {
            border-color: var(--primary-color);
            background: var(--sage-light);
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px rgba(45, 55, 72, 0.1);
        }

        .view-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Calendar Container */
        .calendar-container {
            background: var(--card-background);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(45, 55, 72, 0.08);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .calendar-container:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 24px rgba(45, 55, 72, 0.12);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .calendar-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .calendar-nav-btn {
            padding: 12px 20px;
            min-width: 44px;
            min-height: 44px;
            border: none;
            background: var(--primary-color);
            color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-nav-btn:hover,
        .calendar-nav-btn:focus {
            background: #1a202c;
            color: white;
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px rgba(45, 55, 72, 0.2);
        }

        /* Calendar Grid */
        .calendar-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 0 -20px;
            padding: 0 20px;
            scrollbar-width: thin;
            scrollbar-color: #d3d3d3 #f0f0f0;
            position: relative;
        }
        
        .calendar-container:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }
        
        .calendar-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .calendar-container::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }
        
        .calendar-container::-webkit-scrollbar-thumb {
            background: #d3d3d3;
            border-radius: 4px;
        }
        
        .calendar-container::-webkit-scrollbar-thumb:hover {
            background: #b3b3b3;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(120px, 1fr));
            gap: 1px;
            background: var(--border-color);
            border-radius: 8px;
            overflow: visible;
            min-width: 840px;
        }

        .calendar-day-header {
            background: var(--sage-light);
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .calendar-day {
            background: white;
            min-height: 100px;
            min-width: 44px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .calendar-day:hover,
        .calendar-day:focus {
            background: var(--sage-light);
            outline: 2px solid var(--primary-color);
            outline-offset: -2px;
        }

        .calendar-day.today {
            background: var(--lavender-light);
        }

        .calendar-day.other-month {
            background: #f8f9fa;
            color: #adb5bd;
        }

        .calendar-day-number {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .calendar-booking {
            background: var(--accent-color);
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.875rem;
            margin-bottom: 2px;
            cursor: pointer;
        }

        .calendar-booking:hover {
            background: var(--primary-color);
        }

        /* Timeline Container */
        .timeline-container {
            background: var(--card-background);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(45, 55, 72, 0.08);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            display: none;
            transition: all 0.3s ease;
        }

        .timeline-container:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 24px rgba(45, 55, 72, 0.12);
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .timeline-grid {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 1px;
            background: var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .timeline-hour {
            background: var(--sage-light);
            padding: 8px;
            text-align: center;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .timeline-slot {
            background: white;
            min-height: 60px;
            padding: 4px 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            border-left: 1px solid var(--border-color);
        }

        .timeline-slot:hover,
        .timeline-slot:focus {
            background: var(--sage-light);
            outline: 2px solid var(--primary-color);
            outline-offset: -2px;
        }

        .timeline-booking {
            background: var(--accent-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 1rem;
            margin-bottom: 2px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timeline-booking:hover {
            background: var(--primary-color);
        }

        /* Cards */
        .card {
            background: var(--card-background);
            border-radius: 16px;
            padding: 0;
            box-shadow: 0 4px 16px rgba(45, 55, 72, 0.08);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 24px rgba(45, 55, 72, 0.12);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            font-size: 0.9rem;
            font-weight: 500;
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background: #1a202c;
            border-color: #1a202c;
            color: white;
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px rgba(45, 55, 72, 0.2);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .btn-danger {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }

        .btn-danger:hover,
        .btn-danger:focus {
            background: #b91c1c;
            border-color: #b91c1c;
            color: white;
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        /* Mobile Navigation Toggle */
        .mobile-nav-toggle {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 44px;
            min-height: 44px;
        }

        .mobile-nav-toggle:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            border-color: #ffd700;
        }

        .mobile-nav-toggle:hover {
            background: var(--secondary-color);
        }

        /* Mobile Back Button */
        .mobile-back-btn {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 44px;
            min-height: 44px;
            transition: all 0.3s ease;
        }

        .mobile-back-btn:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            border-color: #ffd700;
        }

        .mobile-back-btn:hover {
            background: #1a202c;
            transform: translateX(-2px);
        }

        /* Small Mobile Phones (320px - 480px) */
        @media (max-width: 480px) {
            .mobile-nav-toggle {
                display: block;
                top: 8px;
                right: 8px;
                padding: 6px;
            }

            .mobile-back-btn {
                display: block;
                top: 8px;
                left: 8px;
                padding: 6px;
            }

            body {
                grid-template-columns: 1fr;
                position: relative;
                width: 100vw;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: -280px;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
                overflow-y: auto;
            }

            .sidebar.mobile-open {
                left: 0;
            }

            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }

            .sidebar-overlay.active {
                display: block;
            }
            
            .main-content {
                padding: 50px 16px 16px 16px;
                grid-column: 1;
                max-width: none;
            }
            
            .page-title {
                font-size: 1.25rem;
                margin-bottom: 0.75rem;
            }
            
            .view-controls {
                flex-direction: column;
                gap: 8px;
            }

            /* Single column on small phones */
            .grid {
                grid-template-columns: 1fr !important;
                gap: 4px !important;
            }

            .rounded-xl {
                padding: 6px !important;
            }

            .text-xl {
                font-size: 0.9rem !important;
            }

            .text-sm {
                font-size: 0.7rem !important;
            }

            .text-xs {
                font-size: 0.6rem !important;
            }

            .mb-8 {
                margin-bottom: 0.75rem !important;
            }

            .mb-6 {
                margin-bottom: 0.5rem !important;
            }

            /* Booking list severe padding reduction for small phones */
            .flex.items-center.justify-between.p-4 {
                padding: 1px 2px !important;
            }

            .space-y-3 > * + * {
                margin-top: 1px !important;
            }

            .bg-spa-cream.rounded-xl.p-4 {
                padding: 2px !important;
            }

            .bg-white.rounded-2xl.shadow-md.p-6 {
                padding: 4px !important;
            }

            .max-h-96.overflow-y-auto {
                max-height: 20rem !important;
                padding: 1px !important;
            }

            .flex.items-center.space-x-4 {
                gap: 4px !important;
            }

            .flex.items-center.space-x-2 {
                gap: 2px !important;
            }

            .w-10.h-10 {
                width: 20px !important;
                height: 20px !important;
            }

            .px-2.py-1 {
                padding: 1px 2px !important;
                font-size: 0.55rem !important;
            }

            .flex.items-center.justify-between.mb-6 {
                margin-bottom: 4px !important;
            }

            .text-xl.font-display {
                font-size: 0.9rem !important;
                margin-bottom: 1px !important;
            }

            .text-sm.text-spa-charcoal-500 {
                font-size: 0.6rem !important;
                margin-top: 1px !important;
            }

            .mt-4.pt-4.border-t {
                margin-top: 2px !important;
                padding-top: 2px !important;
            }

            .text-sm.font-medium {
                font-size: 0.65rem !important;
                margin-bottom: 1px !important;
            }

            .w-full.px-3.py-2 {
                padding: 2px 4px !important;
                font-size: 0.65rem !important;
            }
        }

        /* Large Mobile Phones (481px - 650px) */
        @media (min-width: 481px) and (max-width: 650px) {
            .mobile-nav-toggle {
                display: block;
            }

            .mobile-back-btn {
                display: block;
            }

            body {
                grid-template-columns: 1fr;
                position: relative;
                width: 100vw;
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: -280px;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
                overflow-y: auto;
            }

            .sidebar.mobile-open {
                left: 0;
            }

            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }

            .sidebar-overlay.active {
                display: block;
            }
            
            .main-content {
                padding: 50px 12px 12px 12px;
                grid-column: 1;
                width: 100vw;
            }
            
            .page-title {
                font-size: 1.4rem;
                margin-bottom: 1rem;
            }
            
            .view-controls {
                flex-direction: column;
                gap: 10px;
            }

            /* 2 columns on larger phones */
            .grid {
                grid-template-columns: 1fr 1fr !important;
                gap: 6px !important;
            }

            .rounded-xl {
                padding: 8px !important;
            }

            .text-xl {
                font-size: 1rem !important;
            }

            .text-sm {
                font-size: 0.75rem !important;
            }

            .text-xs {
                font-size: 0.65rem !important;
            }
        }

        /* Z Fold and Ultra-Wide Mobile Screens */
        @media (min-width: 650px) and (max-width: 768px) and (orientation: portrait),
               (min-width: 800px) and (max-width: 1000px) and (orientation: landscape) {
            
            body {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: fixed;
                top: 0;
                left: -280px;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
                overflow-y: auto;
            }

            .sidebar.mobile-open {
                left: 0;
            }

            .mobile-nav-toggle {
                display: block;
            }

            .main-content {
                padding: 50px 12px 12px 12px;
                grid-column: 1;
                width: 100vw;
            }

            /* Z Fold specific - 2 column layout for metrics */
            .grid {
                grid-template-columns: 1fr 1fr !important;
                gap: 6px !important;
            }

            /* Better spacing for Z Fold */
            .page-title {
                font-size: 1.25rem;
                margin-bottom: 1rem;
            }

            /* Filter controls in 2 columns on Z Fold */
            .grid.grid-cols-1.md\\:grid-cols-4 {
                grid-template-columns: 1fr 1fr !important;
                gap: 8px !important;
            }

            /* Bookings list with better spacing */
            .space-y-3 > * + * {
                margin-top: 0.25rem;
            }

            .max-h-96 {
                max-height: 37.5rem;
            }

            /* Card improvements for Z Fold - minimal padding */
            .rounded-xl {
                padding: 8px !important;
            }

            .text-xl {
                font-size: 1rem !important;
            }

            .text-sm {
                font-size: 0.75rem !important;
            }

            .text-xs {
                font-size: 0.65rem !important;
            }

            /* Bookings list items - severely reduced padding for Z Fold */
            .flex.items-center.justify-between.p-4 {
                padding: 2px 4px !important;
            }

            /* Individual booking item spacing */
            .space-y-3 > * + * {
                margin-top: 2px !important;
            }

            /* Filter section minimal padding */
            .bg-spa-cream.rounded-xl.p-4 {
                padding: 4px !important;
            }

            /* Booking container padding */
            .bg-white.rounded-2xl.shadow-md.p-6 {
                padding: 8px !important;
            }

            /* Booking list container */
            .max-h-96.overflow-y-auto {
                max-height: 24rem !important;
                padding: 2px !important;
            }

            /* Client info and service info spacing */
            .flex.items-center.space-x-4 {
                gap: 8px !important;
            }

            .flex.items-center.space-x-2 {
                gap: 4px !important;
            }

            /* Avatar circles smaller */
            .w-10.h-10 {
                width: 24px !important;
                height: 24px !important;
            }

            /* Status badges smaller */
            .px-2.py-1 {
                padding: 1px 4px !important;
                font-size: 0.6rem !important;
            }

            /* Page header more compact */
            .page-header {
                margin-bottom: 1rem !important;
            }

            /* Remove excessive margins */
            .mb-8 {
                margin-bottom: 1rem !important;
            }

            .mb-6 {
                margin-bottom: 0.75rem !important;
            }

            /* Hamburger menu smaller on Z Fold */
            .mobile-nav-toggle {
                top: 10px !important;
                right: 10px !important;
                padding: 8px !important;
            }

            /* Booking section header compact */
            .flex.items-center.justify-between.mb-6 {
                margin-bottom: 8px !important;
            }

            /* Booking section title smaller */
            .text-xl.font-display {
                font-size: 1rem !important;
                margin-bottom: 2px !important;
            }

            .text-sm.text-spa-charcoal-500 {
                font-size: 0.65rem !important;
                margin-top: 2px !important;
            }

            /* Results count section compact */
            .mt-4.pt-4.border-t {
                margin-top: 4px !important;
                padding-top: 4px !important;
            }

            /* Filter labels compact */
            .text-sm.font-medium {
                font-size: 0.7rem !important;
                margin-bottom: 2px !important;
            }

            /* Select dropdowns compact */
            .w-full.px-3.py-2 {
                padding: 4px 6px !important;
                font-size: 0.7rem !important;
            }
        }

        /* Tablets Portrait (769px - 1024px) */
        @media (min-width: 769px) and (max-width: 1024px) {
            body {
                grid-template-columns: 240px 1fr;
                width: 100vw;
            }

            .mobile-nav-toggle {
                display: none !important;
            }

            .sidebar {
                position: static !important;
                left: auto !important;
                width: auto !important;
                height: auto !important;
            }

            .main-content {
                padding: 16px;
                width: 100%;
            }

            /* 2-3 column layout for tablets */
            .grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 10px !important;
            }

            .grid.grid-cols-1.md\\:grid-cols-4 {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 10px !important;
            }

            .page-title {
                font-size: 1.75rem;
            }

            .text-xl {
                font-size: 1.125rem;
            }
        }

        /* Large Tablets & Small Desktops (1025px - 1440px) */
        @media (min-width: 1025px) and (max-width: 1440px) {
            body {
                grid-template-columns: 280px 1fr;
                width: 100vw;
            }

            .mobile-nav-toggle {
                display: none !important;
            }

            .sidebar {
                position: static !important;
                left: auto !important;
                width: auto !important;
                height: auto !important;
            }

            .main-content {
                padding: 20px;
                width: 100%;
            }

            /* 3 column layout for large tablets */
            .grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 12px !important;
            }

            .grid.grid-cols-1.md\\:grid-cols-4 {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 12px !important;
            }

            .page-title {
                font-size: 2rem;
            }
        }

        /* Large Desktops (1441px+) */
        @media (min-width: 1441px) {
            body {
                grid-template-columns: 280px 1fr;
                width: 100vw;
            }

            .main-content {
                padding: 24px;
                width: 100%;
            }

            /* Full 3-4 column layout for large screens */
            .grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 16px !important;
            }

            .grid.grid-cols-1.md\\:grid-cols-4 {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 16px !important;
            }

            .page-title {
                font-size: 2.25rem;
            }

            /* More comfortable spacing on large screens */
            .rounded-xl {
                padding: 20px !important;
            }
        }

        /* Base Desktop Reset (769px+) - Applied to all desktop sizes */
        @media (min-width: 769px) {
            .mobile-nav-toggle {
                display: none !important;
            }

            .sidebar-overlay {
                display: none !important;
            }

            .sidebar {
                position: static !important;
                left: auto !important;
                width: auto !important;
                height: auto !important;
            }
        }

        /* Loading State */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            .nav-item:focus,
            .view-btn:focus,
            .calendar-day:focus,
            .timeline-slot:focus {
                outline: 3px solid;
                outline-offset: 2px;
            }
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Booking Management Styles */
        .booking-actions {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
        }

        .table-wrapper {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: white;
        }

        .bookings-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .bookings-table thead {
            background: var(--sage-light);
        }

        .bookings-table th,
        .bookings-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .bookings-table th {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .bookings-table tbody tr:hover {
            background: var(--sage-light);
        }

        .date-time .date {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.125rem;
        }

        .date-time .time {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .client-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .client-email,
        .client-phone {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .service-type {
            font-weight: 500;
            color: var(--text-primary);
        }

        .practitioner {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .duration,
        .price {
            font-weight: 600;
        }

        .status-badge,
        .payment-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-scheduled {
            background: var(--ocean-light);
            color: #0369a1;
        }

        .status-completed {
            background: #d1fae5;
            color: #059669;
        }

        .status-cancelled {
            background: #fef2f2;
            color: #dc2626;
        }

        .status-no-show {
            background: #fefce8;
            color: #ca8a04;
        }

        .status-rescheduled {
            background: var(--lavender-light);
            color: #7c3aed;
        }

        .payment-paid {
            background: #d1fae5;
            color: #059669;
        }

        .payment-pending {
            background: #fefce8;
            color: #ca8a04;
        }

        .payment-failed {
            background: #fef2f2;
            color: #dc2626;
        }

        .payment-refunded {
            background: #f1f5f9;
            color: #64748b;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-sm {
            padding: 12px 16px;
            min-width: 44px;
            min-height: 44px;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-sm .icon {
            width: 12px;
            height: 12px;
            margin-right: 4px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state h3 {
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .empty-state p {
            margin-bottom: 24px;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: none;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            cursor: pointer;
        }

        .modal-content {
            position: relative;
            background: white;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .booking-modal-content {
            max-width: 800px;
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 24px 32px 16px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            z-index: 10001;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10002;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: var(--sage-light);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 32px;
        }

        /* Time Conflict Modal Styles */
        .time-conflict-modal .modal-content {
            max-width: 600px;
        }

        .conflict-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .conflict-list {
            margin: 12px 0;
            padding-left: 20px;
        }

        .alternatives-section {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
        }

        .alternatives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .time-alternative-btn {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
        }

        .time-alternative-btn:hover {
            border-color: var(--primary-color);
            background: #f8fafc;
        }

        .time-status {
            display: block;
            font-size: 12px;
            color: #10b981;
            font-weight: 500;
            margin-top: 4px;
        }

        .form-section {
            margin-bottom: 32px;
        }

        .form-section h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(45, 55, 72, 0.1);
        }

        .form-group small {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .form-actions {
            display: flex;
            gap: 16px;
            justify-content: flex-end;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }

        .availability-section,
        .bookings-section,
        .add-availability-section {
            margin-bottom: 24px;
        }

        .availability-slot,
        .booking-slot {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 8px;
            background: white;
        }

        .availability-slot.available {
            border-color: var(--success-color);
            background: rgba(139, 162, 139, 0.1);
        }

        .availability-slot.blocked {
            border-color: var(--warning-color);
            background: rgba(214, 158, 46, 0.1);
        }

        .slot-status {
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .current-availability,
        .current-bookings {
            max-height: 300px;
            overflow-y: auto;
        }

        /* Mobile Calendar Adjustments */
        @media (max-width: 768px) {
            .calendar-container {
                margin: 0 -16px;
                padding: 0 16px;
            }
            
            .calendar-grid {
                min-width: 700px;
                grid-template-columns: repeat(7, minmax(100px, 1fr));
            }
            
            .calendar-day {
                min-height: 80px;
                padding: 8px;
                font-size: 0.875rem;
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                margin: 20px;
            }

            .modal-header,
            .modal-body {
                padding: 20px;
            }

            .table-wrapper {
                font-size: 0.75rem;
            }

            .bookings-table th,
            .bookings-table td {
                padding: 8px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .booking-actions {
                flex-direction: column;
                gap: 12px;
            }
        }

        /* Add-ons Styles */
        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 12px;
        }

        .addon-item {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.3s ease;
            background: white;
        }

        .addon-item:hover {
            border-color: var(--accent-color);
        }

        .addon-item:has(.addon-checkbox:checked) {
            border-color: var(--success-color);
            background: rgba(139, 162, 139, 0.05);
        }

        .addon-label {
            display: flex;
            align-items: flex-start;
            padding: 16px;
            cursor: pointer;
            gap: 12px;
        }

        .addon-checkbox {
            margin: 0;
            width: 18px;
            height: 18px;
            accent-color: var(--success-color);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .addon-details {
            flex: 1;
        }

        .addon-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .addon-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .addon-price {
            font-weight: 700;
            color: var(--success-color);
            font-size: 1rem;
        }

        .addon-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        @media (max-width: 768px) {
            .addons-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Add-ons Analytics Styles */
        .addon-analytics-section {
            margin-bottom: 32px;
        }

        .addon-metric {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-left: 4px solid var(--success-color);
        }

        .addon-analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .addon-performance-section,
        .addon-combinations-section,
        .addon-categories-section {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }

        .addon-performance-section h4,
        .addon-combinations-section h4,
        .addon-categories-section h4 {
            margin: 0 0 16px 0;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 600;
        }

        .addon-performance-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .addon-performance-item:last-child {
            border-bottom: none;
        }

        .addon-rank {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--success-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            margin-right: 12px;
        }

        .addon-info {
            flex: 1;
        }

        .addon-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .addon-stats {
            display: flex;
            gap: 12px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .combination-item,
        .category-performance-item {
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .combination-item:last-child,
        .category-performance-item:last-child {
            border-bottom: none;
        }

        .combination-name,
        .category-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .combination-stats,
        .category-stats {
            display: flex;
            gap: 12px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .category-progress {
            margin-top: 8px;
            height: 4px;
            background: #f3f4f6;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--success-color);
            transition: width 0.3s ease;
        }

        .addon-insights {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }

        .addon-insights h4 {
            margin: 0 0 16px 0;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 600;
        }

        .insights-grid {
            display: grid;
            gap: 16px;
        }

        .insight-item {
            padding: 16px;
            background: #f9fafb;
            border-radius: 6px;
            border-left: 4px solid var(--accent-color);
        }

        .insight-tip {
            display: block;
            font-size: 0.875rem;
            color: #b45309;
            margin-top: 4px;
        }

        .insight-success {
            display: block;
            font-size: 0.875rem;
            color: #065f46;
            margin-top: 4px;
        }

        .no-data {
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .addon-analytics-grid {
                grid-template-columns: 1fr;
            }
            
            .addon-stats,
            .combination-stats,
            .category-stats {
                flex-direction: column;
                gap: 4px;
            }
        }

        /* Lavender Color Utility Classes */
        .bg-lavender-light { background-color: var(--lavender-light); }
        .bg-lavender-50 { background-color: var(--lavender-50); }
        .bg-lavender-100 { background-color: var(--lavender-100); }
        .bg-lavender-200 { background-color: var(--lavender-200); }
        .bg-lavender-300 { background-color: var(--lavender-300); }
        .bg-lavender-400 { background-color: var(--lavender-400); }
        .bg-lavender-500 { background-color: var(--lavender-500); }
        .bg-lavender-600 { background-color: var(--lavender-600); }
        .bg-lavender-700 { background-color: var(--lavender-700); }
        .bg-lavender-800 { background-color: var(--lavender-800); }
        .bg-lavender-900 { background-color: var(--lavender-900); }

        .text-lavender-light { color: var(--lavender-light); }
        .text-lavender-50 { color: var(--lavender-50); }
        .text-lavender-100 { color: var(--lavender-100); }
        .text-lavender-200 { color: var(--lavender-200); }
        .text-lavender-300 { color: var(--lavender-300); }
        .text-lavender-400 { color: var(--lavender-400); }
        .text-lavender-500 { color: var(--lavender-500); }
        .text-lavender-600 { color: var(--lavender-600); }
        .text-lavender-700 { color: var(--lavender-700); }
        .text-lavender-800 { color: var(--lavender-800); }
        .text-lavender-900 { color: var(--lavender-900); }

        .text-lavender-dark-50 { color: var(--lavender-dark-50); }
        .text-lavender-dark-100 { color: var(--lavender-dark-100); }
        .text-lavender-dark-200 { color: var(--lavender-dark-200); }
        .text-lavender-dark-300 { color: var(--lavender-dark-300); }
        .text-lavender-dark-400 { color: var(--lavender-dark-400); }
        .text-lavender-dark-500 { color: var(--lavender-dark-500); }
        .text-lavender-dark-600 { color: var(--lavender-dark-600); }
        .text-lavender-dark-700 { color: var(--lavender-dark-700); }
        .text-lavender-dark-800 { color: var(--lavender-dark-800); }
        .text-lavender-dark-900 { color: var(--lavender-dark-900); }

        .border-lavender-200 { border-color: var(--lavender-200); }
        .border-lavender-300 { border-color: var(--lavender-300); }
        .border-lavender-400 { border-color: var(--lavender-400); }
        .border-lavender-500 { border-color: var(--lavender-500); }
        .border-lavender-600 { border-color: var(--lavender-600); }

        .hover\:bg-lavender-50:hover { background-color: var(--lavender-50); }
        .hover\:bg-lavender-600:hover { background-color: var(--lavender-600); }
        .hover\:border-lavender-200:hover { border-color: var(--lavender-200); }

        .focus\:ring-lavender-500:focus { --tw-ring-color: var(--lavender-500); }

        /* Client Management Styles - WCAG 2.1 AA Compliant */
        .clients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .client-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            min-height: 200px;
        }

        .client-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .client-card:focus-within {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }


        .client-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .client-info {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .client-stats {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--sage-light);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .client-stat {
            text-align: center;
            flex: 1;
        }

        .client-stat-value {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 0.25rem;
        }

        .client-stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .client-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .edit-client-btn {
            flex: 1;
            min-width: 44px;
            min-height: 44px;
            padding: 0.75rem 1rem;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .edit-client-btn:hover {
            background: var(--sage-dark);
            transform: translateY(-1px);
        }

        .edit-client-btn:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .edit-client-btn:active {
            transform: translateY(0);
        }

        /* Client Directory Header */
        .client-directory-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .client-search {
            max-width: 300px;
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .client-search:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            border-color: var(--primary-color);
        }

        .client-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--cream);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .client-summary-item {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .client-summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }

        .client-summary-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Edit Client Modal Styles */
        .edit-client-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .edit-client-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .edit-client-modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .edit-client-modal.active .edit-client-modal-content {
            transform: scale(1);
        }

        .edit-client-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .edit-client-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .close-modal-btn {
            min-width: 44px;
            min-height: 44px;
            padding: 0.5rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 4px;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .close-modal-btn:hover {
            background: var(--sage-light);
            color: var(--text-primary);
        }

        .close-modal-btn:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .edit-client-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .edit-client-form .form-group {
            display: flex;
            flex-direction: column;
        }

        .edit-client-form label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .edit-client-form input,
        .edit-client-form select,
        .edit-client-form textarea {
            min-height: 44px;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .edit-client-form input:focus,
        .edit-client-form select:focus,
        .edit-client-form textarea:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
            border-color: var(--primary-color);
        }

        .edit-client-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .save-client-btn,
        .cancel-client-btn {
            min-width: 44px;
            min-height: 44px;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .save-client-btn {
            background: var(--accent-color);
            color: white;
        }

        .save-client-btn:hover {
            background: var(--sage-dark);
        }

        .save-client-btn:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .cancel-client-btn {
            background: var(--sage-light);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .cancel-client-btn:hover {
            background: var(--border-color);
        }

        .cancel-client-btn:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        /* Mobile Responsive for Client Management */
        @media (max-width: 480px) {
            .clients-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .client-card {
                padding: 1rem;
                min-height: auto;
            }


            .client-summary {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .client-directory-header {
                flex-direction: column;
                align-items: stretch;
            }

            .client-search {
                max-width: none;
            }

            .edit-client-modal-content {
                width: 95%;
                padding: 1.5rem;
            }

            .edit-client-actions {
                flex-direction: column;
            }

            .save-client-btn,
            .cancel-client-btn {
                width: 100%;
            }
        }

        /* Tablet Responsive */
        @media (min-width: 481px) and (max-width: 768px) {
            .clients-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .client-summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* High Contrast Mode Support - WCAG 2.1 AA */
        @media (prefers-contrast: high) {
            .client-card {
                border: 2px solid var(--text-primary);
                background: white;
            }

            .client-card:hover {
                border-color: var(--accent-color);
                background: var(--sage-light);
            }

            .edit-client-btn {
                border: 2px solid var(--accent-color);
                background: var(--accent-color);
                color: white;
            }

            .edit-client-btn:hover {
                background: var(--text-primary);
                border-color: var(--text-primary);
            }

            .client-search:focus,
            .edit-client-form input:focus,
            .edit-client-form select:focus,
            .edit-client-form textarea:focus {
                outline: 4px solid #ffd700;
                outline-offset: 2px;
                border: 2px solid var(--text-primary);
            }
        }

        /* Reduced Motion Support - WCAG 2.1 AA */
        @media (prefers-reduced-motion: reduce) {
            .client-card,
            .edit-client-btn,
            .edit-client-modal,
            .edit-client-modal-content {
                transition: none;
            }

            .client-card:hover {
                transform: none;
            }

            .edit-client-btn:hover {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Screen Readers -->
    <a href="#main-content" class="skip-link" aria-label="Skip to main content">Skip to main content</a>

    <!-- Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="sidebar-nav">
        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            <title>Menu</title>
        </svg>
        <span class="visually-hidden">Toggle main navigation</span>
    </button>

    <!-- Mobile Back Button -->
    <button class="mobile-back-btn" id="mobile-back-btn" aria-label="Go back to previous page" style="display: none;">
        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            <title>Back</title>
        </svg>
        <span class="visually-hidden">Go back</span>
    </button>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" aria-hidden="true"></div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" role="navigation" aria-label="Admin navigation" id="sidebar-nav">
            <div class="sidebar-header">
                <h1 class="sidebar-title">
                    <img src="../assets/logos/itt-heal-lotus.png" alt="ITT Heal Logo" style="height: 24px; width: auto; margin-right: 8px; vertical-align: middle; object-fit: contain;">
                    ITT Heal Admin
                </h1>
                <div id="current-timezone" style="color: #a3a3a3; font-size: 0.75rem; margin-top: 8px; padding: 4px 8px; background: rgba(255,255,255,0.1); border-radius: 4px;">
                    Loading timezone...
                </div>
            </div>

            <div class="nav-menu">
                <div class="nav-section">
                    <h2 class="nav-section-title">Overview</h2>
                    <div class="nav-item active" data-page="dashboard" role="button" tabindex="0" aria-label="Dashboard overview" aria-current="page">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                        Dashboard
                    </div>
                </div>

                <div class="nav-section">
                    <h2 class="nav-section-title">Booking Management</h2>
                    <div class="nav-item" data-page="bookings" role="button" tabindex="0" aria-label="Manage client bookings">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                        </svg>
                        Bookings
                    </div>
                    <div class="nav-item" data-page="schedule" role="button" tabindex="0" aria-label="Manage schedule and availability">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                        </svg>
                        Schedule
                    </div>
                </div>

                <div class="nav-section">
                    <h2 class="nav-section-title">Business Intelligence</h2>
                    <div class="nav-item" data-page="analytics" role="button" tabindex="0" aria-label="View business analytics">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                        </svg>
                        Analytics
                    </div>
                    <div class="nav-item" data-page="reports" role="button" tabindex="0" aria-label="Generate business reports">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z"/>
                        </svg>
                        Reports
                    </div>
                </div>

                <div class="nav-section">
                    <h2 class="nav-section-title">Client Management</h2>
                    <div class="nav-item" data-page="clients" role="button" tabindex="0" aria-label="Manage client directory">
                        <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                        </svg>
                        Clients
                    </div>
                </div>
            </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content" id="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page" style="display: block;">
                <div class="page-header">
                    <h1 class="page-title">ITT Heal Dashboard</h1>
                    <p class="page-subtitle">Wellness • Luxury • Excellence</p>
                    <div style="width: 80px; height: 2px; background: linear-gradient(90deg, var(--accent-color), transparent); margin: 24px auto;"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">System Status</h2>
                    </div>
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading dashboard data...</span>
                    </div>
                </div>
            </div>

            <!-- Schedule Page -->
            <div id="schedule-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Schedule Management</h1>
                    <p class="page-subtitle">Harmonize • Time • Wellness</p>
                    <div style="width: 80px; height: 2px; background: linear-gradient(90deg, var(--accent-color), transparent); margin: 24px auto;"></div>
                </div>

                <!-- View Controls -->
                <div class="view-controls" role="group" aria-labelledby="view-controls-title">
                    <h2 id="view-controls-title" class="visually-hidden">Schedule View Controls</h2>
                    
                    <div class="view-control-group">
                        <label class="view-control-label">View Type</label>
                        <div class="view-control-buttons" role="radiogroup" aria-labelledby="view-type-label">
                            <span id="view-type-label" class="visually-hidden">Select schedule view type</span>
                            <button class="view-btn active" data-view="calendar" role="radio" aria-checked="true" aria-label="Calendar view" id="calendar-radio">Calendar</button>
                            <button class="view-btn" data-view="timeline" role="radio" aria-checked="false" aria-label="Timeline view" id="timeline-radio">Timeline</button>
                        </div>
                    </div>

                    <div class="view-control-group">
                        <label class="view-control-label">Time Period</label>
                        <div class="view-control-buttons" role="radiogroup" aria-labelledby="time-period-label">
                            <span id="time-period-label" class="visually-hidden">Select time period</span>
                            <button class="view-btn" data-period="daily" role="radio" aria-checked="false" aria-label="Daily view" id="daily-radio">Daily</button>
                            <button class="view-btn" data-period="weekly" role="radio" aria-checked="false" aria-label="Weekly view" id="weekly-radio">Weekly</button>
                            <button class="view-btn active" data-period="monthly" role="radio" aria-checked="true" aria-label="Monthly view" id="monthly-radio">Monthly</button>
                            <button class="view-btn" data-period="yearly" role="radio" aria-checked="false" aria-label="Yearly view" id="yearly-radio">Yearly</button>
                        </div>
                    </div>
                </div>

                <!-- Bulk Blocking Controls -->
                <div class="bulk-blocking-controls" style="margin: 24px 0; padding: 24px; background: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-midnight-blue">Bulk Time Blocking</h3>
                        <button id="toggle-bulk-blocking" class="btn-secondary text-sm" style="padding: 12px 16px; min-width: 44px; min-height: 44px; display: inline-flex; align-items: center; justify-content: center;">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                            </svg>
                            Block Time Periods
                        </button>
                    </div>
                    
                    <div id="bulk-blocking-panel" style="display: none;">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Block Type</label>
                                <select id="bulk-block-type" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="month">Entire Month</option>
                                    <option value="week">Entire Week</option>
                                    <option value="date-range">Custom Date Range</option>
                                </select>
                            </div>
                            
                            <div id="month-selector" class="block">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Month</label>
                                <input type="month" id="bulk-block-month" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            
                            <div id="week-selector" class="hidden">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Week Start</label>
                                <input type="date" id="bulk-block-week-start" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            
                            <div id="date-range-selector" class="hidden grid grid-cols-2 gap-2">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                                    <input type="date" id="bulk-block-start-date" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                                    <input type="date" id="bulk-block-end-date" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Reason for Blocking (Optional)</label>
                            <input type="text" id="bulk-block-reason" placeholder="e.g., Vacation, Maintenance, Holiday" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div class="flex items-center gap-4">
                            <button id="block-single-day" class="btn-danger" data-block-day="true" aria-label="Block a single day">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                                </svg>
                                Block Day
                            </button>
                            
                            <button id="apply-bulk-block" class="btn-primary" aria-label="Apply bulk blocking">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                Apply Bulk Block
                            </button>
                            
                            <button id="cancel-bulk-block" class="btn-secondary" aria-label="Cancel bulk blocking">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                                Cancel
                            </button>
                            
                            <button id="view-blocked-periods" class="btn-secondary ml-auto" aria-label="View all blocked periods">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                                View Blocked
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Calendar View -->
                <div class="calendar-container" id="calendar-view" aria-labelledby="calendar-title">
                    <div class="calendar-header">
                        <h2 id="calendar-title" class="calendar-title">Calendar View</h2>
                        <div class="calendar-nav">
                            <button class="calendar-nav-btn" id="prev-period" aria-label="Previous calendar period">&lt;</button>
                            <span id="current-period" aria-live="polite" aria-atomic="true">Loading...</span>
                            <button class="calendar-nav-btn" id="next-period" aria-label="Next calendar period">&gt;</button>
                        </div>
                    </div>
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading calendar...</span>
                    </div>
                </div>

                <!-- Timeline View -->
                <div class="timeline-container" id="timeline-view" aria-labelledby="timeline-title">
                    <div class="timeline-header">
                        <h2 id="timeline-title" class="timeline-title">Timeline View</h2>
                        <div class="calendar-nav">
                            <button class="calendar-nav-btn" id="timeline-prev" aria-label="Previous timeline period">&lt;</button>
                            <span id="timeline-period" aria-live="polite" aria-atomic="true">Loading...</span>
                            <button class="calendar-nav-btn" id="timeline-next" aria-label="Next timeline period">&gt;</button>
                        </div>
                    </div>
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading timeline...</span>
                    </div>
                </div>
            </div>

            <!-- Other pages will be populated by JavaScript -->
            <div id="bookings-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Booking Management</h1>
                    <p class="page-subtitle">Clients • Sessions • Serenity</p>
                    <div style="width: 80px; height: 2px; background: linear-gradient(90deg, var(--accent-color), transparent); margin: 24px auto;"></div>
                </div>
                
                <!-- Booking Actions -->
                <div class="booking-actions" style="margin-bottom: 24px; display: flex; gap: 16px; justify-content: center;">
                    <button id="new-booking-btn" class="btn-primary" aria-label="Create new booking">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                        </svg>
                        New Booking
                    </button>
                    <button id="refresh-bookings-btn" class="btn-secondary" aria-label="Refresh bookings list">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                        Refresh
                    </button>
                </div>
                
                <div class="card">
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading bookings...</span>
                    </div>
                </div>
            </div>

            <div id="analytics-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Business Analytics</h1>
                    <p class="page-subtitle">Insights • Growth • Prosperity</p>
                    <div style="width: 80px; height: 2px; background: linear-gradient(90deg, var(--accent-color), transparent); margin: 24px auto;"></div>
                </div>
                <div class="card">
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading analytics...</span>
                    </div>
                </div>
            </div>

            <div id="reports-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Business Reports</h1>
                    <p class="page-subtitle">Analysis • Clarity • Vision</p>
                    <div style="width: 80px; height: 2px; background: linear-gradient(90deg, var(--accent-color), transparent); margin: 24px auto;"></div>
                </div>
                <div class="card">
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading reports...</span>
                    </div>
                </div>
            </div>

            <div id="clients-page" class="page" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Client Directory</h1>
                    <p class="page-subtitle">Relationships • Care • Connection</p>
                    <div style="width: 80px; height: 2px; background: linear-gradient(90deg, var(--accent-color), transparent); margin: 24px auto;"></div>
                </div>
                <div class="card">
                    <div class="loading">
                        <div class="spinner" aria-hidden="true"></div>
                        <span aria-live="polite" aria-atomic="true">Loading clients...</span>
                    </div>
                </div>
            </div>
    </main>

    <!-- New Booking Modal -->
    <div id="new-booking-modal" class="modal" role="dialog" aria-labelledby="new-booking-title" aria-hidden="true">
        <div class="modal-overlay" aria-hidden="true"></div>
        <div class="modal-content booking-modal-content">
            <div class="modal-header">
                <h2 id="new-booking-title" class="modal-title">New Booking</h2>
                <button class="close-btn" aria-label="Close modal" type="button">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="new-booking-form" class="booking-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="client-name" class="form-label">Client Name *</label>
                            <input type="text" id="client-name" name="client-name" class="form-input" required 
                                   aria-describedby="client-name-error" autocomplete="name">
                            <div id="client-name-error" class="error-message" aria-live="polite"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="client-email" class="form-label">Email Address *</label>
                            <input type="email" id="client-email" name="client-email" class="form-input" required 
                                   aria-describedby="client-email-error" autocomplete="email">
                            <div id="client-email-error" class="error-message" aria-live="polite"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="client-phone" class="form-label">Phone Number *</label>
                            <input type="tel" id="client-phone" name="client-phone" class="form-input" required 
                                   aria-describedby="client-phone-error" autocomplete="tel">
                            <div id="client-phone-error" class="error-message" aria-live="polite"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="booking-datetime" class="form-label">Date & Time *</label>
                            <input type="datetime-local" id="booking-datetime" name="booking-datetime" class="form-input" required 
                                   aria-describedby="booking-datetime-error">
                            <div id="booking-datetime-error" class="error-message" aria-live="polite"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="service-type" class="form-label">Service Type *</label>
                            <select id="service-type" name="service-type" class="form-input" required 
                                    aria-describedby="service-type-error">
                                <option value="">Select a service</option>
                                <option value="30min" data-price="90">30 Minute Massage - $90</option>
                                <option value="60min" data-price="140">60 Minute Massage - $140</option>
                                <option value="90min" data-price="200">90 Minute Massage - $200</option>
                                <option value="120min" data-price="260">120 Minute Massage - $260</option>
                            </select>
                            <div id="service-type-error" class="error-message" aria-live="polite"></div>
                        </div>
                    </div>
                    
                    <fieldset class="addon-fieldset">
                        <legend>Add-on Services</legend>
                        <div class="addon-grid">
                            <div class="addon-item">
                                <input type="checkbox" id="aromatherapy" name="addons" value="aromatherapy" 
                                       class="addon-checkbox" data-price="15">
                                <label for="aromatherapy" class="addon-label">
                                    Aromatherapy Enhancement
                                    <span class="addon-price">+$15</span>
                                </label>
                            </div>
                            
                            <div class="addon-item">
                                <input type="checkbox" id="hot-stone" name="addons" value="hot-stone" 
                                       class="addon-checkbox" data-price="25">
                                <label for="hot-stone" class="addon-label">
                                    Hot Stone Therapy
                                    <span class="addon-price">+$25</span>
                                </label>
                            </div>
                            
                            <div class="addon-item">
                                <input type="checkbox" id="deep-tissue" name="addons" value="deep-tissue" 
                                       class="addon-checkbox" data-price="20">
                                <label for="deep-tissue" class="addon-label">
                                    Deep Tissue Focus
                                    <span class="addon-price">+$20</span>
                                </label>
                            </div>
                            
                            <div class="addon-item">
                                <input type="checkbox" id="cupping" name="addons" value="cupping" 
                                       class="addon-checkbox" data-price="30">
                                <label for="cupping" class="addon-label">
                                    Cupping Therapy
                                    <span class="addon-price">+$30</span>
                                </label>
                            </div>
                            
                            <div class="addon-item">
                                <input type="checkbox" id="reflexology" name="addons" value="reflexology" 
                                       class="addon-checkbox" data-price="25">
                                <label for="reflexology" class="addon-label">
                                    Reflexology Add-on
                                    <span class="addon-price">+$25</span>
                                </label>
                            </div>
                            
                            <div class="addon-item">
                                <input type="checkbox" id="prenatal" name="addons" value="prenatal" 
                                       class="addon-checkbox" data-price="10">
                                <label for="prenatal" class="addon-label">
                                    Prenatal Specialization
                                    <span class="addon-price">+$10</span>
                                </label>
                            </div>
                        </div>
                    </fieldset>
                    
                    <div class="form-group">
                        <label for="special-requests" class="form-label">Special Requests</label>
                        <textarea id="special-requests" name="special-requests" class="form-input" rows="3" 
                                  placeholder="Any specific requests, areas of focus, or preferences..."></textarea>
                    </div>
                    
                    <div class="pricing-summary">
                        <div class="price-row">
                            <span class="price-label">Base Service:</span>
                            <span id="base-price" class="price-value">$0.00</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label">Add-ons:</span>
                            <span id="addon-price" class="price-value">$0.00</span>
                        </div>
                        <div class="price-row total-price">
                            <span class="price-label">Total:</span>
                            <span id="total-price" class="price-value">$0.00</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-booking-btn">Cancel</button>
                        <button type="submit" class="btn-primary" id="save-booking-btn">Create Booking</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Include CSS for hidden elements and accessibility -->
    <style>
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Accessibility improvements for modal and forms */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .error-message {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 4px;
            padding: 0.5rem;
        }

        .error-message:not(:empty) {
            display: block;
        }

        /* Enhanced focus indicators for WCAG compliance */
        input:focus, select:focus, textarea:focus, button:focus {
            outline: 3px solid #ffd700 !important;
            outline-offset: 2px !important;
        }

        input[aria-invalid="true"] {
            border-color: #dc2626 !important;
            background-color: #fef2f2;
        }

        /* Button Styles */
        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-width: 44px;
            min-height: 44px;
            justify-content: center;
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background: #1a202c;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(45, 55, 72, 0.3);
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-width: 44px;
            min-height: 44px;
            justify-content: center;
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background: var(--primary-color);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(45, 55, 72, 0.3);
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }

        .booking-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 24px;
        }

        /* Modal improvements */
        .modal[role="dialog"] {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
        }

        /* Fieldset styling for better accessibility */
        fieldset {
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        legend {
            font-weight: 600;
            padding: 0 0.5rem;
            color: var(--text-primary);
        }

        /* New Booking Modal Styles */
        .booking-form {
            max-width: 100%;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .form-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-height: 44px;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(45, 55, 72, 0.1);
        }

        .form-input:invalid {
            border-color: var(--error-color);
        }

        .addon-fieldset {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: var(--sage-light);
        }

        .addon-fieldset legend {
            font-weight: 600;
            color: var(--text-primary);
            background: white;
            padding: 0 12px;
            border-radius: 4px;
        }

        .addon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .addon-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: white;
            transition: all 0.3s ease;
        }

        .addon-item:hover {
            background: var(--sage-light);
            border-color: var(--primary-color);
        }

        .addon-checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
        }

        .addon-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            font-weight: 500;
            cursor: pointer;
        }

        .addon-price {
            font-weight: 600;
            color: var(--accent-color);
            font-size: 0.875rem;
        }

        .pricing-summary {
            background: var(--sage-light);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .price-row:last-child {
            margin-bottom: 0;
        }

        .price-label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .price-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .total-price {
            border-top: 2px solid var(--border-color);
            padding-top: 12px;
            margin-top: 12px;
            font-size: 1.125rem;
        }

        .total-price .price-label,
        .total-price .price-value {
            font-weight: 700;
            color: var(--primary-color);
        }

        .form-actions {
            display: flex;
            gap: 16px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        /* Responsive design for forms */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .addon-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }
    </style>

    <script>
        // Mobile Navigation Functions
        function toggleMobileNav() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            const toggleBtn = document.querySelector('.mobile-nav-toggle');
            const isOpen = sidebar.classList.contains('mobile-open');
            
            sidebar.classList.toggle('mobile-open');
            overlay.classList.toggle('active');
            
            // Update ARIA attributes
            toggleBtn.setAttribute('aria-expanded', !isOpen);
            
            // Manage focus for accessibility
            if (!isOpen) {
                // Focus first nav item when opening
                const firstNavItem = sidebar.querySelector('.nav-item');
                if (firstNavItem) firstNavItem.focus();
            }
        }

        function closeMobileNav() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            const toggleBtn = document.querySelector('.mobile-nav-toggle');
            
            sidebar.classList.remove('mobile-open');
            overlay.classList.remove('active');
            
            // Update ARIA attributes
            toggleBtn.setAttribute('aria-expanded', 'false');
            
            // Return focus to toggle button
            toggleBtn.focus();
        }

        // New Booking Modal Functions
        function showNewBookingModal() {
            const modal = document.getElementById('new-booking-modal');
            if (modal) {
                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
                
                // Focus the first form field
                const firstInput = modal.querySelector('#client-name');
                if (firstInput) {
                    setTimeout(() => firstInput.focus(), 100);
                }
                
                // Trap focus within modal
                trapFocus(modal);
            }
        }

        function hideNewBookingModal() {
            const modal = document.getElementById('new-booking-modal');
            if (modal) {
                modal.classList.remove('active');
                modal.setAttribute('aria-hidden', 'true');
                
                // Clear form
                const form = modal.querySelector('#new-booking-form');
                if (form) {
                    form.reset();
                    calculatePrice();
                }
                
                // Return focus to the new booking button
                const newBookingBtn = document.getElementById('new-booking-btn');
                if (newBookingBtn) {
                    newBookingBtn.focus();
                }
            }
        }

        function calculatePrice() {
            const serviceSelect = document.getElementById('service-type');
            const addonCheckboxes = document.querySelectorAll('.addon-checkbox:checked');
            const basePriceEl = document.getElementById('base-price');
            const addonPriceEl = document.getElementById('addon-price');
            const totalPriceEl = document.getElementById('total-price');
            
            let basePrice = 0;
            let addonPrice = 0;
            
            // Calculate base service price
            if (serviceSelect && serviceSelect.selectedOptions.length > 0) {
                const selectedOption = serviceSelect.selectedOptions[0];
                basePrice = parseFloat(selectedOption.getAttribute('data-price') || '0');
            }
            
            // Calculate addon prices
            addonCheckboxes.forEach(checkbox => {
                addonPrice += parseFloat(checkbox.getAttribute('data-price') || '0');
            });
            
            const totalPrice = basePrice + addonPrice;
            
            // Update display
            if (basePriceEl) basePriceEl.textContent = `$${basePrice.toFixed(2)}`;
            if (addonPriceEl) addonPriceEl.textContent = `$${addonPrice.toFixed(2)}`;
            if (totalPriceEl) totalPriceEl.textContent = `$${totalPrice.toFixed(2)}`;
        }

        function trapFocus(modal) {
            const focusableElements = modal.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];
            
            modal.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstElement) {
                            lastElement.focus();
                            e.preventDefault();
                        }
                    } else {
                        if (document.activeElement === lastElement) {
                            firstElement.focus();
                            e.preventDefault();
                        }
                    }
                }
            });
        }

        function handleNewBookingSubmit(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            
            // Basic validation
            const requiredFields = ['client-name', 'client-email', 'client-phone', 'booking-datetime', 'service-type'];
            let isValid = true;
            
            requiredFields.forEach(fieldName => {
                const field = form.querySelector(`[name="${fieldName}"]`);
                const errorEl = form.querySelector(`#${fieldName}-error`);
                
                if (field && !field.value.trim()) {
                    isValid = false;
                    if (errorEl) {
                        errorEl.textContent = 'This field is required';
                        errorEl.style.display = 'block';
                    }
                    field.classList.add('error');
                } else {
                    if (errorEl) {
                        errorEl.textContent = '';
                        errorEl.style.display = 'none';
                    }
                    if (field) field.classList.remove('error');
                }
            });
            
            if (!isValid) {
                return;
            }
            
            // Collect form data
            const bookingData = {
                client_name: formData.get('client-name'),
                client_email: formData.get('client-email'),
                client_phone: formData.get('client-phone'),
                booking_datetime: formData.get('booking-datetime'),
                service_type: formData.get('service-type'),
                special_requests: formData.get('special-requests') || '',
                addons: []
            };
            
            // Collect selected addons
            const selectedAddons = form.querySelectorAll('.addon-checkbox:checked');
            selectedAddons.forEach(checkbox => {
                bookingData.addons.push({
                    name: checkbox.value,
                    price: parseFloat(checkbox.getAttribute('data-price') || '0')
                });
            });
            
            // Calculate total price
            const serviceOption = form.querySelector('#service-type').selectedOptions[0];
            const basePrice = parseFloat(serviceOption.getAttribute('data-price') || '0');
            const addonTotal = bookingData.addons.reduce((sum, addon) => sum + addon.price, 0);
            bookingData.total_price = basePrice + addonTotal;
            
            console.log('New booking data:', bookingData);
            
            // TODO: Send to admin dashboard for processing
            if (window.adminDashboard && window.adminDashboard.createNewBooking) {
                window.adminDashboard.createNewBooking(bookingData);
            }
            
            // Hide modal
            hideNewBookingModal();
            
            // Show success message
            alert('Booking created successfully!');
        }

        // Enhanced accessibility and navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners for mobile navigation
            const mobileToggle = document.querySelector('.mobile-nav-toggle');
            const sidebarOverlay = document.querySelector('.sidebar-overlay');
            const mobileBackBtn = document.querySelector('.mobile-back-btn');
            
            if (mobileToggle) {
                mobileToggle.addEventListener('click', toggleMobileNav);
            }
            
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', closeMobileNav);
            }

            if (mobileBackBtn) {
                mobileBackBtn.addEventListener('click', function() {
                    // Trigger the dashboard's back functionality
                    if (window.adminDashboard && window.adminDashboard.goBackInHistory) {
                        window.adminDashboard.goBackInHistory();
                    } else {
                        // Fallback to browser history
                        history.back();
                    }
                });
            }
            
            const navItems = document.querySelectorAll('.nav-item');
            
            // Close mobile nav when clicking on nav items with delay
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Small delay to allow navigation to complete before closing
                    setTimeout(() => closeMobileNav(), 150);
                });
                
                // Add keyboard navigation
                item.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        item.click();
                    }
                });
            });
            
            // Escape key closes mobile nav
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar.classList.contains('mobile-open')) {
                        closeMobileNav();
                    }
                }
            });
            
            // Trap focus within sidebar when open on mobile
            const sidebar = document.querySelector('.sidebar');
            const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            
            sidebar.addEventListener('keydown', function(e) {
                if (e.key === 'Tab' && sidebar.classList.contains('mobile-open')) {
                    const focusable = sidebar.querySelectorAll(focusableElements);
                    const first = focusable[0];
                    const last = focusable[focusable.length - 1];
                    
                    if (e.shiftKey && document.activeElement === first) {
                        e.preventDefault();
                        last.focus();
                    } else if (!e.shiftKey && document.activeElement === last) {
                        e.preventDefault();
                        first.focus();
                    }
                }
            });
            
            // Setup New Booking Modal Event Listeners
            const newBookingBtn = document.getElementById('new-booking-btn');
            if (newBookingBtn) {
                newBookingBtn.addEventListener('click', showNewBookingModal);
            }
            
            const modal = document.getElementById('new-booking-modal');
            if (modal) {
                // Close modal when clicking overlay
                const overlay = modal.querySelector('.modal-overlay');
                if (overlay) {
                    overlay.addEventListener('click', hideNewBookingModal);
                }
                
                // Close modal when clicking close button
                const closeBtn = modal.querySelector('.close-btn');
                if (closeBtn) {
                    closeBtn.addEventListener('click', hideNewBookingModal);
                }
                
                // Close modal when pressing Escape
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && modal.classList.contains('active')) {
                        hideNewBookingModal();
                    }
                });
                
                // Handle form submission
                const form = modal.querySelector('#new-booking-form');
                if (form) {
                    form.addEventListener('submit', handleNewBookingSubmit);
                }
                
                // Handle cancel button
                const cancelBtn = modal.querySelector('#cancel-booking-btn');
                if (cancelBtn) {
                    cancelBtn.addEventListener('click', hideNewBookingModal);
                }
                
                // Setup price calculation
                const serviceSelect = modal.querySelector('#service-type');
                if (serviceSelect) {
                    serviceSelect.addEventListener('change', calculatePrice);
                }
                
                const addonCheckboxes = modal.querySelectorAll('.addon-checkbox');
                addonCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', calculatePrice);
                });
                
                // Initial price calculation
                calculatePrice();
            }
        });
    </script>

    <!-- Stripe.js for payment processing -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="admin-dashboard.js?v=20250708184500"></script>
    
    <!-- Dashboard Initialization Check -->
    <script>
        setTimeout(() => {
            const card = document.querySelector('#dashboard-page .card');
            // Only show error if dashboard still shows loading AND admin dashboard wasn't initialized
            if (card && card.innerHTML.includes('Loading dashboard data') && !window.adminDashboard) {
                console.log('❌ Dashboard failed to initialize - JavaScript error likely');
                card.innerHTML = `
                    <div class="w-full px-4 py-6 overflow-x-hidden">
                        <h2 style="color: red; margin-bottom: 1rem;">Dashboard Loading Issue Detected</h2>
                        <p style="margin-bottom: 1rem;">The dashboard JavaScript failed to initialize. This could be:</p>
                        <ul style="margin-left: 20px; margin-bottom: 1rem;">
                            <li>• JavaScript syntax error</li>
                            <li>• API connection error</li>
                            <li>• Browser cache issue</li>
                        </ul>
                        <p><strong>Try:</strong> Hard refresh (Ctrl+F5 or Cmd+Shift+R)</p>
                    </div>
                `;
            } else if (window.adminDashboard) {
                console.log('✅ Dashboard initialized successfully');
            }
        }, 3000);
    </script>
</body>
</html>